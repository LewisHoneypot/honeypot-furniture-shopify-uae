{% doc %}
  @prompt
    Create a structured Product Info Section for a product page, with the following layout and editable zones. This section is designed for furniture products, especially beds:
    ‚úÖ Top Row (4 Horizontal Buttons)
    
    Add 4 equally spaced rectangular buttons across the top labelled ‚ÄúDouble‚Äù.
    Buttons should be:
    Clickable (optionally linked to size-specific content or scroll anchors)
    Customisable label text (e.g., Double, King, Super King)
    Styled consistently with toggle or tab behaviour (optional)
    üõèÔ∏è Main Content Grid (2 Columns Below Buttons)
    
    Create a two-column grid layout beneath the buttons:
    Left Column (Top) ‚Äî Product Description Box
    Rich text area with WYSIWYG editing
    Pre-fill with placeholder product description text
    Right Column (Top) ‚Äî Image Box
    Uploadable image area
    Maintain consistent ratio (e.g., 4:3 or 1:1)
    Optionally allow zoom on hover or modal view
    üßæ Second Row (Full Width Below):
    
    Left Column ‚Äî Additional Product Info Box
    Rich text field or collapsible accordion
    Ideal for warranty info, materials, or assembly guides
    Right Column ‚Äî Bullet Points in Two Columns
    Dynamic bullet list input field
    Layout should automatically split into 2 responsive columns
    Option to customise bullet style and spacing
    General Settings:
    
    Fully responsive design for tablet and mobile
    Allow custom padding/margins per section
    Use neutral typography and spacing for clean aesthetic

{% enddoc %}
{% assign ai_gen_id = block.id | replace: '_', '' | downcase %}

{% style %}
  .product-info-section-{{ ai_gen_id }} {
    padding: {{ block.settings.section_padding }}px;
    max-width: 100%;
    margin: 0 auto;
  }

  .product-info-buttons-{{ ai_gen_id }} {
    display: flex;
    justify-content: space-between;
    margin-bottom: 30px;
    gap: {{ block.settings.button_spacing }}px;
  }

  .product-info-button-{{ ai_gen_id }} {
    flex: 1;
    padding: 12px 15px;
    text-align: center;
    background-color: {{ block.settings.button_bg_color }};
    color: {{ block.settings.button_text_color }};
    border: 1px solid {{ block.settings.button_border_color }};
    border-radius: {{ block.settings.button_border_radius }}px;
    cursor: pointer;
    transition: background-color 0.3s, color 0.3s;
    font-weight: 500;
    text-decoration: none;
  }

  .product-info-button-{{ ai_gen_id }}.active {
    background-color: {{ block.settings.button_active_bg_color }};
    color: {{ block.settings.button_active_text_color }};
    border-color: {{ block.settings.button_active_border_color }};
  }

  .product-info-button-{{ ai_gen_id }}:hover {
    background-color: {{ block.settings.button_hover_bg_color }};
    color: {{ block.settings.button_hover_text_color }};
  }

  .product-info-grid-{{ ai_gen_id }} {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 30px;
    margin-bottom: 30px;
  }

  .product-description-{{ ai_gen_id }} {
    padding: {{ block.settings.content_padding }}px;
    background-color: {{ block.settings.content_bg_color }};
    border-radius: {{ block.settings.content_border_radius }}px;
  }

  .product-image-container-{{ ai_gen_id }} {
    position: relative;
    overflow: hidden;
    border-radius: {{ block.settings.content_border_radius }}px;
    height: 0;
    padding-bottom: {{ block.settings.image_aspect_ratio }}%;
  }

  .product-image-{{ ai_gen_id }} {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .product-image-placeholder-{{ ai_gen_id }} {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: #f4f4f4;
  }

  .product-image-placeholder-{{ ai_gen_id }} svg {
    width: 50%;
    height: 50%;
    opacity: 0.5;
  }

  .product-info-second-row-{{ ai_gen_id }} {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 30px;
  }

  .additional-info-{{ ai_gen_id }} {
    padding: {{ block.settings.content_padding }}px;
    background-color: {{ block.settings.content_bg_color }};
    border-radius: {{ block.settings.content_border_radius }}px;
  }

  .bullet-points-container-{{ ai_gen_id }} {
    padding: {{ block.settings.content_padding }}px;
    background-color: {{ block.settings.content_bg_color }};
    border-radius: {{ block.settings.content_border_radius }}px;
  }

  .bullet-points-columns-{{ ai_gen_id }} {
    column-count: 2;
    column-gap: 30px;
  }

  .bullet-points-columns-{{ ai_gen_id }} ul {
    margin: 0;
    padding-left: 20px;
    list-style-type: {{ block.settings.bullet_style }};
  }

  .bullet-points-columns-{{ ai_gen_id }} li {
    margin-bottom: {{ block.settings.bullet_spacing }}px;
    break-inside: avoid;
  }

  @media screen and (max-width: 768px) {
    .product-info-grid-{{ ai_gen_id }},
    .product-info-second-row-{{ ai_gen_id }} {
      grid-template-columns: 1fr;
    }

    .product-info-buttons-{{ ai_gen_id }} {
      flex-wrap: wrap;
      gap: 10px;
    }

    .product-info-button-{{ ai_gen_id }} {
      flex: 0 0 calc(50% - 5px);
      margin-bottom: 10px;
    }

    .bullet-points-columns-{{ ai_gen_id }} {
      column-count: 1;
    }
  }
{% endstyle %}

<div class="product-info-section-{{ ai_gen_id }}" {{ block.shopify_attributes }}>
  <div class="product-info-buttons-{{ ai_gen_id }}">
    {% for i in (1..4) %}
      {% assign button_text_key = 'button_' | append: i | append: '_text' %}
      {% assign button_link_key = 'button_' | append: i | append: '_link' %}
      {% assign button_text = block.settings[button_text_key] %}
      {% assign button_link = block.settings[button_link_key] %}
      
      {% if button_text != blank %}
        <a href="{{ button_link }}" class="product-info-button-{{ ai_gen_id }}" data-button-index="{{ i }}">
          {{ button_text }}
        </a>
      {% endif %}
    {% endfor %}
  </div>

  <div class="product-info-grid-{{ ai_gen_id }}">
    <div class="product-description-{{ ai_gen_id }}">
      {{ block.settings.product_description }}
    </div>

    <div class="product-image-container-{{ ai_gen_id }}">
      {% if block.settings.product_image %}
        <img 
          src="{{ block.settings.product_image | image_url: width: 800 }}" 
          alt="{{ block.settings.product_image.alt | escape }}"
          class="product-image-{{ ai_gen_id }}"
          loading="lazy"
          width="{{ block.settings.product_image.width }}"
          height="{{ block.settings.product_image.height }}"
        >
      {% else %}
        <div class="product-image-placeholder-{{ ai_gen_id }}">
          {{ 'product-apparel-1' | placeholder_svg_tag }}
        </div>
      {% endif %}
    </div>
  </div>

  <div class="product-info-second-row-{{ ai_gen_id }}">
    <div class="additional-info-{{ ai_gen_id }}">
      {{ block.settings.additional_info }}
    </div>

    <div class="bullet-points-container-{{ ai_gen_id }}">
      <div class="bullet-points-columns-{{ ai_gen_id }}">
        {{ block.settings.bullet_points }}
      </div>
    </div>
  </div>
</div>

<script>
  (function() {
    const productInfoSection = document.querySelector('.product-info-section-{{ ai_gen_id }}');
    if (!productInfoSection) return;
    
    const buttons = productInfoSection.querySelectorAll('.product-info-button-{{ ai_gen_id }}');
    
    buttons.forEach(button => {
      button.addEventListener('click', function(e) {
        if (!this.getAttribute('href') || this.getAttribute('href') === '#') {
          e.preventDefault();
          
          // Remove active class from all buttons
          buttons.forEach(btn => btn.classList.remove('active'));
          
          // Add active class to clicked button
          this.classList.add('active');
        }
      });
    });
    
    // Set the first button as active by default if no buttons have links
    const hasLinks = Array.from(buttons).some(button => {
      const href = button.getAttribute('href');
      return href && href !== '#';
    });
    
    if (!hasLinks && buttons.length > 0) {
      buttons[0].classList.add('active');
    }
  })();
</script>

{% schema %}
{
  "name": "Product Info Section",
  "tag": null,
  "settings": [
    {
      "type": "header",
      "content": "Button Configuration"
    },
    {
      "type": "text",
      "id": "button_1_text",
      "label": "Button 1 Text",
      "default": "Double"
    },
    {
      "type": "url",
      "id": "button_1_link",
      "label": "Button 1 Link (optional)"
    },
    {
      "type": "text",
      "id": "button_2_text",
      "label": "Button 2 Text",
      "default": "King"
    },
    {
      "type": "url",
      "id": "button_2_link",
      "label": "Button 2 Link (optional)"
    },
    {
      "type": "text",
      "id": "button_3_text",
      "label": "Button 3 Text",
      "default": "Super King"
    },
    {
      "type": "url",
      "id": "button_3_link",
      "label": "Button 3 Link (optional)"
    },
    {
      "type": "text",
      "id": "button_4_text",
      "label": "Button 4 Text",
      "default": "Emperor"
    },
    {
      "type": "url",
      "id": "button_4_link",
      "label": "Button 4 Link (optional)"
    },
    {
      "type": "header",
      "content": "Content"
    },
    {
      "type": "richtext",
      "id": "product_description",
      "label": "Product Description",
      "default": "<p>This premium bed frame combines elegant design with sturdy construction. Crafted from high-quality materials, it provides excellent support and will complement any bedroom decor. Available in multiple sizes to suit your needs.</p>"
    },
    {
      "type": "image_picker",
      "id": "product_image",
      "label": "Product Image"
    },
    {
      "type": "richtext",
      "id": "additional_info",
      "label": "Additional Information",
      "default": "<p><strong>Warranty Information:</strong></p><p>This product comes with a 5-year manufacturer warranty covering structural defects and workmanship.</p><p><strong>Materials:</strong></p><p>Frame: Solid oak wood<br>Finish: Water-based, non-toxic lacquer<br>Support: Reinforced steel brackets</p>"
    },
    {
      "type": "richtext",
      "id": "bullet_points",
      "label": "Bullet Points",
      "default": "<ul><li>Solid hardwood construction for durability</li><li>Easy assembly with included tools</li><li>Reinforced center support for added stability</li><li>Non-slip feet to protect flooring</li><li>Eco-friendly materials and finishes</li><li>Compatible with most standard mattresses</li><li>Available in multiple finishes</li><li>Designed for optimal mattress ventilation</li></ul>"
    },
    {
      "type": "header",
      "content": "Style Settings"
    },
    {
      "type": "range",
      "id": "section_padding",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "px",
      "label": "Section Padding",
      "default": 30
    },
    {
      "type": "range",
      "id": "content_padding",
      "min": 0,
      "max": 50,
      "step": 5,
      "unit": "px",
      "label": "Content Box Padding",
      "default": 20
    },
    {
      "type": "range",
      "id": "button_spacing",
      "min": 5,
      "max": 30,
      "step": 5,
      "unit": "px",
      "label": "Button Spacing",
      "default": 10
    },
    {
      "type": "range",
      "id": "content_border_radius",
      "min": 0,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Content Border Radius",
      "default": 8
    },
    {
      "type": "range",
      "id": "button_border_radius",
      "min": 0,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Button Border Radius",
      "default": 4
    },
    {
      "type": "range",
      "id": "image_aspect_ratio",
      "min": 50,
      "max": 150,
      "step": 5,
      "unit": "%",
      "label": "Image Aspect Ratio",
      "default": 100,
      "info": "100% = square, 75% = 4:3, 56.25% = 16:9"
    },
    {
      "type": "header",
      "content": "Bullet Point Settings"
    },
    {
      "type": "select",
      "id": "bullet_style",
      "label": "Bullet Style",
      "options": [
        {
          "value": "disc",
          "label": "Filled Circle"
        },
        {
          "value": "circle",
          "label": "Open Circle"
        },
        {
          "value": "square",
          "label": "Square"
        },
        {
          "value": "decimal",
          "label": "Numbers"
        }
      ],
      "default": "disc"
    },
    {
      "type": "range",
      "id": "bullet_spacing",
      "min": 5,
      "max": 30,
      "step": 5,
      "unit": "px",
      "label": "Bullet Point Spacing",
      "default": 10
    },
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "color",
      "id": "content_bg_color",
      "label": "Content Background Color",
      "default": "#f9f9f9"
    },
    {
      "type": "color",
      "id": "button_bg_color",
      "label": "Button Background Color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "button_text_color",
      "label": "Button Text Color",
      "default": "#333333"
    },
    {
      "type": "color",
      "id": "button_border_color",
      "label": "Button Border Color",
      "default": "#dddddd"
    },
    {
      "type": "color",
      "id": "button_hover_bg_color",
      "label": "Button Hover Background Color",
      "default": "#f5f5f5"
    },
    {
      "type": "color",
      "id": "button_hover_text_color",
      "label": "Button Hover Text Color",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "button_active_bg_color",
      "label": "Active Button Background Color",
      "default": "#333333"
    },
    {
      "type": "color",
      "id": "button_active_text_color",
      "label": "Active Button Text Color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "button_active_border_color",
      "label": "Active Button Border Color",
      "default": "#333333"
    }
  ],
  "presets": [
    {
      "name": "Product Info Section"
    }
  ]
}
{% endschema %}