{% doc %}
  @prompt
    Large Text filled with an image. Add an option to change the font. Add an option to select the text alignment. Add an option to change the block background colour

{% enddoc %}
{% assign ai_gen_id = block.id | replace: '_', '' | downcase %}

{% style %}
  .ai-text-image-container-{{ ai_gen_id }} {
    position: relative;
    padding: 40px 20px;
    display: flex;
    justify-content: {{ block.settings.text_alignment }};
    background-color: {{ block.settings.background_color }};
    overflow: hidden;
  }

  .ai-text-image-content-{{ ai_gen_id }} {
    position: relative;
    max-width: 100%;
  }

  .ai-text-image-heading-{{ ai_gen_id }} {
    font-family: {{ block.settings.font.family }}, sans-serif;
    font-weight: {{ block.settings.font.weight }};
    font-style: {{ block.settings.font.style }};
    font-size: clamp(40px, 10vw, {{ block.settings.text_size }}px);
    margin: 0;
    padding: 0;
    background-clip: text;
    -webkit-background-clip: text;
    color: transparent;
    background-size: cover;
    background-position: center;
    line-height: 1.1;
    text-align: {{ block.settings.text_alignment }};
  }

  @media screen and (max-width: 749px) {
    .ai-text-image-container-{{ ai_gen_id }} {
      padding: 30px 15px;
    }
  }
{% endstyle %}

<div class="ai-text-image-container-{{ ai_gen_id }}" {{ block.shopify_attributes }}>
  <div class="ai-text-image-content-{{ ai_gen_id }}">
    {% if block.settings.heading != blank %}
      <h2 
        class="ai-text-image-heading-{{ ai_gen_id }}" 
        style="background-image: url('{{ block.settings.image | image_url: width: 2000 }}');"
      >
        {{ block.settings.heading }}
      </h2>
    {% else %}
      <h2 
        class="ai-text-image-heading-{{ ai_gen_id }}" 
        style="background-image: url('{{ block.settings.image | image_url: width: 2000 }}');"
      >
        Your text here
      </h2>
    {% endif %}
  </div>
</div>

{% schema %}
{
  "name": "Image Text Fill",
  "tag": null,
  "settings": [
    {
      "type": "header",
      "content": "Content"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading text",
      "default": "YOUR TEXT HERE"
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "Fill image"
    },
    {
      "type": "header",
      "content": "Style"
    },
    {
      "type": "font_picker",
      "id": "font",
      "label": "Font",
      "default": "helvetica_n4"
    },
    {
      "type": "range",
      "id": "text_size",
      "min": 40,
      "max": 200,
      "step": 10,
      "unit": "px",
      "label": "Text size",
      "default": 120
    },
    {
      "type": "select",
      "id": "text_alignment",
      "label": "Text alignment",
      "options": [
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "right",
          "label": "Right"
        }
      ],
      "default": "center"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background color",
      "default": "#FFFFFF"
    }
  ],
  "presets": [
    {
      "name": "Image Text Fill"
    }
  ]
}
{% endschema %}